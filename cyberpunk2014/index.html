<!DOCTYPE html>
<head>	
 <style type="text/css" media="screen">
body {
background: black;
text-align: center;
color: #DDD;
font-family: Arial;
}
 
.controls {
color: #BBB;
}
 
#cr-stage { margin: 20px auto 0; }
 
.bottom {
font-size: 12px;
color: #888;
margin-top: 50px;
}
 
.bottom a {
color: #AAA;
}
</style>
</head>
<body>


<script src="lib/crafty.js"></script>
<script src="src/components.js"></script>
<script src="src/game.js"></script>
<script src="src/scenes.js"></script>
<script src="lib/glitch-canvas.js"></script>
<canvas id="canvas-two" width="400" height="200"></canvas>
<img id="scream" src="assets/gun.jpg" alt="The Scream" width="400" height="200" style = "display:none;" >
<canvas id="canvas-one" width="400" height="200" style="visibility:hidden;" ></canvas>
<div> 
Disks remaining: 10 <br>
Lives Remaining: 3 <br>
Level: 1 <br>


</div>
	
	<script>
	function init()
	{
		// getting both canvases + drawing contexts
		var canvas_one = document.getElementById( 'canvas-one' );
		var canvas_two = document.getElementById( 'canvas-two' );

		var ctx_1 = canvas_one.getContext( '2d' );
		var ctx_2 = canvas_two.getContext( '2d' );

		// storing canvas dimensions
		var canvas_width = canvas_one.clientWidth;
		var canvas_height = canvas_one.clientHeight;



/*
		// draw a white background (transparent pixels are converted to black after glitching)
		ctx_1.fillStyle = '#ffffff';
		ctx_1.fillRect( 0, 0, canvas_width, canvas_height );

		// draw some random stuff on canvas one so we have something to glitch
		for ( var i = 0; i < 30; i++ )
		{
			ctx_1.beginPath();
			ctx_1.moveTo( Math.random() * canvas_width, Math.random() * canvas_height );
			ctx_1.lineTo( Math.random() * canvas_width, Math.random() * canvas_height );
			ctx_1.lineTo( Math.random() * canvas_width, Math.random() * canvas_height );
			ctx_1.closePath();
			ctx_1.fillStyle = getRandomColor();
			ctx_1.fill();
		}
*/
		// getting the image data from canvas one
		// https://developer.mozilla.org/en/docs/Web/API/CanvasRenderingContext2D#getImageData()
		

		
								var img=document.getElementById("scream");
ctx_1.drawImage(img,10,10);
		
		var image_data_1 = ctx_1.getImageData( 0, 0, canvas_width, canvas_height );

		
		// glitch the image data (passing drawImageDataInCanvasTwo as a callback function)
		var parameters = { amount: 15, seed: 15, iterations: disks, quality: 30 };
		
		glitch( image_data_1, parameters, drawImageDataInCanvasTwo );
		
		
		
		
		function drawImageDataInCanvasTwo( image_data )
		{
			// put the glitched image data on canvas two.
			// https://developer.mozilla.org/en/docs/Web/API/CanvasRenderingContext2D#putImageData()
			ctx_2.putImageData( image_data, 0, 0 );
		}

		// http://stackoverflow.com/a/1484514/229189
		function getRandomColor()
		{
			var letters = '0123456789ABCDEF'.split( '' );
			var color = '#';
			
			for ( var i = 0; i < 6; i++ )
			{
				color += letters[ Math.round(Math.random() * 15) ];
			}

			return color;
		}
	}

	init();
	</script>
</body>
</html>

